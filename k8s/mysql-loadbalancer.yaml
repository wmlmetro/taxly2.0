apiVersion: v1
kind: Service
metadata:
  name: mysql-external
  namespace: taxly
  annotations:
    service.beta.kubernetes.io/do-loadbalancer-name: "taxly-mysql-lb"
    service.beta.kubernetes.io/do-loadbalancer-protocol: "tcp"
    # Optional: Restrict access to specific IPs for security
    # service.beta.kubernetes.io/do-loadbalancer-allow-list: "YOUR_IP_ADDRESS/32,ANOTHER_IP/32"
spec:
  type: LoadBalancer
  selector:
    app: mysql
  ports:
    - name: mysql
      protocol: TCP
      port: 3306
      targetPort: 3306
  sessionAffinity: ClientIP
